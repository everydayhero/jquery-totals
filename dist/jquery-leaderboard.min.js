!function(e,n,a){e.fn.getEDHLeaderboard=function(n){Number.prototype.formatMoney=function(e,n,t){var r=this;return e=isNaN(e=Math.abs(e))?2:e,n=n===a?",":n,t=t===a?".":t,s=0>r?"-":"",i=parseInt(r=Math.abs(+r||0).toFixed(e))+"",j=(j=i.length)>3?j%3:0,s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(e?n+Math.abs(r-i).toFixed(e).slice(2):"")},e.fn.getEDHLeaderboard.defaults={type:"individual",ids:["au-0"],limit:5,onComplete:null,render:null};var t=e(this.selector),r=e.extend({},e.fn.getEDHLeaderboard.defaults,n),o="https://everydayhero.com/api/v2/pages.jsonp?ids=",u=e.map(r.ids,function(e){return"https://everydayhero.com/api/v2/campaigns/"+e+"/leaderboard.json?type="+r.type+"&limit="+r.limit}),d=function(e){return e.sort(function(e,n){return n.amount.cents-e.amount.cents}).slice(0,r.limit)},c=function(n){return e.map(n,function(e){return{name:e.name,url:e.url,iso_code:e.amount.currency.iso_code,amount:"$"+(e.amount.cents/100).formatMoney(2,".",","),img:e.image.medium_image_url}})},m=function(n){var a="";e(n).each(function(e,n){a+='<a class="edhLeaderboard__item" href="'+n.url+'" title="'+n.name+'"><div class="edhLeaderboard__image"><img src="'+n.img+'" /></div><div class="edhLeaderboard__name" title="'+n.name+'">'+n.name+'</div><div class="edhLeaderboard__amount">'+n.amount+"</div></a>"}),e(t).append(a)},l=function(n){var a=[];e.each(n.pages,function(e,n){a.push(n)});var i=d(a),o=c(i);e.isFunction(r.render)?r.render.call(t,o):m(o),e.isFunction(r.onComplete)&&r.onComplete.call(t)},p=function(n){return e.ajax({url:o+n,dataType:"jsonp"})},f=function(){var n=[],a=[];e.each(u,function(t,i){a.push(e.getJSON(i,{format:"json"},function(a){e.each(a.leaderboard.page_ids,function(e,a){n.push(a)})}))}),e.when.apply(e,a).then(function(){p(n).done(function(e){l(e)})})};f()}}(jQuery,window);