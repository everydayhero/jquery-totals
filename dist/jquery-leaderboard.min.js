!function(n,e,t){n.fn.getEDHLeaderboard=function(e){Number.prototype.formatMoney=function(n,e,a){var o=this;return n=isNaN(n=Math.abs(n))?2:n,e=e===t?",":e,a=a===t?".":a,s=0>o?"-":"",i=parseInt(o=Math.abs(+o||0).toFixed(n))+"",j=(j=i.length)>3?j%3:0,s+(j?i.substr(0,j)+a:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+a)+(n?e+Math.abs(o-i).toFixed(n).slice(2):"")},n.fn.getEDHLeaderboard.defaults={type:"individual",ids:["au-0"],onComplete:null,render:null};var a=n(this.selector),o=n.extend({},n.fn.getEDHLeaderboard.defaults,e),r="https://everydayhero.com/api/v2/pages.jsonp?ids=",u=n.map(o.ids,function(n){return"https://everydayhero.com/api/v2/campaigns/"+n+"/leaderboard.json?type="+o.type}),c=function(n){return n.sort(function(n,e){return e.amount.cents-n.amount.cents}).slice(0,5)},d=function(e){return n.map(e,function(n){return{name:n.name,url:n.url,iso_code:n.amount.currency.iso_code,amount:"$"+(n.amount.cents/100).formatMoney(2,".",","),img:n.image.medium_image_url}})},m=function(e){var t="";n(e).each(function(n,e){t+='<a href="'+e.url+'" title="'+e.name+'"><div class="image"><img src="'+e.img+'" /></div><div class="name" title="'+e.name+'"><span>'+e.name+'</span></div><div class="amount">'+e.amount+"</div></a>"}),n(a).append(t)},l=function(e){var t=[];n.each(e.pages,function(n,e){t.push(e)});var i=c(t),r=d(i);n.isFunction(o.render)?o.render.call(a,r):m(r),n.isFunction(o.onComplete)&&o.onComplete.call(a)},p=function(e){return n.ajax({url:r+e,dataType:"jsonp"})},f=function(){var e=[],t=[];n.each(u,function(a,o){t.push(n.getJSON(o,{format:"json"},function(t){n.each(t.leaderboard.page_ids,function(n,t){e.push(t)})}))}),n.when.apply(n,t).then(function(){p(e).done(function(n){l(n)})})};f()}}(jQuery,window);